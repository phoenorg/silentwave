
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SilentWave</title>
  <style>
    :root{
      --bg:#0f1216; --bg-soft:#151922; --text:#e9eefb; --muted:#aab3c8;
      --accent:#6ad1ff; --accent-2:#7cf5c9; --danger:#ff6b6b; --ok:#36c69a;
      --card:#12161f; --border:#1e2430;
      --touch:56px; --radius:14px; --gap:12px; --gap-lg:16px;
      --shadow:0 8px 24px rgba(0,0,0,.35);
    }
    [data-theme="light"]{
      --bg:#f6f8fc; --bg-soft:#ffffff; --text:#0c111d; --muted:#47566b;
      --accent:#0078d4; --accent-2:#12b886; --danger:#d7263d; --ok:#0fa37f;
      --card:#ffffff; --border:#e5eaf2;
      --shadow:0 8px 24px rgba(0,0,0,.08);
    }
    html,body{height:100%}
    body{
      margin:0; font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--text); background:var(--bg);
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: saturate(1.2) blur(6px);
      background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,0)) , var(--bg);
    }
    .bar{
      display:flex; gap:var(--gap); align-items:center; padding:12px 16px; border-bottom:1px solid var(--border);
    }
    .title{
      font-weight:700; font-size:1.1rem; letter-spacing:.2px; flex:1;
    }
    .chip{
      border:1px solid var(--border); padding:8px 12px; border-radius:999px; color:var(--muted);
    }
    main{padding:16px; display:flex; flex-direction:column; gap:var(--gap-lg); max-width:880px; margin:0 auto}
    section.card{
      background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); padding:14px;
    }
    h2{font-size:1rem; margin:.2rem 0 .6rem; color:var(--muted)}
    .row{display:flex; gap:var(--gap); align-items:center; flex-wrap:wrap}
    .col{flex:1 1 240px}
    .btn{
      height:var(--touch); padding:0 18px; border-radius:12px; border:1px solid var(--border);
      background:var(--bg-soft); color:var(--text); font-weight:600; cursor:pointer;
    }
    .btn.primary{background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#05131a; border:none}
    .btn.warn{background:var(--danger); color:#fff; border:none}
    .btn.ghost{background:transparent}
    .btn:disabled{opacity:.6; cursor:not-allowed}
    .btn-toggle{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border:1px solid var(--border); border-radius:12px; background:var(--bg-soft)}
    .switch{appearance:none; width:48px; height:28px; border-radius:999px; background:#2a3342; position:relative; outline:none; cursor:pointer}
    .switch:checked{background:var(--accent)}
    .switch::after{content:""; position:absolute; top:4px; left:4px; width:20px; height:20px; background:#fff; border-radius:50%; transition:left .2s}
    .switch:checked::after{left:24px}
    .stack{display:flex; flex-direction:column; gap:8px}
    .slider{width:100%}
    .track{
      display:grid; grid-template-columns: 1fr auto; gap:8px; padding:10px; border:1px dashed var(--border);
      border-radius:12px; background:rgba(255,255,255,.02)
    }
    .track .controls{display:grid; grid-template-columns: 1fr 1fr; gap:8px}
    label{font-size:.9rem; color:var(--muted)}
    input[type="range"]{width:100%}
    .kbd{
      display:inline-block; border:1px solid var(--border); border-bottom-width:3px;
      padding:2px 6px; border-radius:8px; background:var(--bg-soft); color:var(--muted); font-weight:600; font-size:.85rem;
    }
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .grid-3{display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px}
    footer{opacity:.7; padding:24px; text-align:center; font-size:.9rem}
    .small{font-size:.85rem; color:var(--muted)}
    .warning{color:var(--danger)}
    .ok{color:var(--ok)}
    /* Mobile tweaks */
    @media (max-width:480px){
      .grid-3{grid-template-columns:1fr}
      .grid-2{grid-template-columns:1fr}
    }
  </style>
</head>
<body data-theme="dark" aria-live="polite">
  <header>
    <div class="bar" role="banner">
      <div class="title">SilentWave</div>
      <button class="btn" id="toggleTheme" aria-label="Toggle dark/light mode">Mode</button>
      <!--<span class="chip" id="sessionChip" title="Listening duration">00:00:00</span>-->
    </div>
  </header>

  <main>
    <!-- Main Player -->
    <section class="card" aria-label="Main Player">
      <h2>Playback & Intensity</h2>
      <div class="row">
        <button class="btn primary" id="btnPlayPause" aria-pressed="false">‚ñ∂Ô∏è Start</button>
        <button class="btn" id="btnStopAll">‚èπÔ∏è Stop all</button>
        <label class="btn-toggle"><input type="checkbox" class="switch" id="safeMode" checked/> Safe Mode</label>
      </div>
      <div class="grid-3" style="margin-top:10px">
        <div class="stack">
          <label for="intensity">Intensity (global masking)</label>
          <input id="intensity" class="slider" type="range" min="0" max="200" value="100"/>
          <div class="small">Adjust the overall power according to your tinnitus. <span class="warning">Increase gradually.</span></div>
        </div>
        <div class="stack">
          <label for="masterVol">Master volume</label>
          <input id="masterVol" class="slider" type="range" min="0" max="100" value="70"/>
          <div class="small">Limited in <strong>Safe Mode</strong> to prevent sudden loud sounds.</div>
        </div>
        <div class="stack">
          <label>Equalizer (3 bands)</label>
          <div class="grid-3">
            <div>
              <label for="eqBass">Bass</label>
              <input id="eqBass" class="slider" type="range" min="-15" max="15" value="0"/>
            </div>
            <div>
              <label for="eqMid">Mid</label>
              <input id="eqMid" class="slider" type="range" min="-15" max="15" value="0"/>
            </div>
            <div>
              <label for="eqTreble">Treble</label>
              <input id="eqTreble" class="slider" type="range" min="-15" max="15" value="0"/>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Tracks -->
    <section class="card" aria-label="Built-in tracks">
      <h2>Built-in Sounds</h2>
      <div id="builtInTracks" class="stack"></div>
    </section>

    <section class="card" aria-label="Import sounds">
      <h2>Add a sound (MP3)</h2>
      <div class="row">
        <input type="file" id="fileInput" accept="audio/mpeg,audio/mp3" multiple/>
        <label class="btn-toggle"><input type="checkbox" class="switch" id="loopUpload" checked/> Loop</label>
      </div>
      <div id="userTracks" class="stack" style="margin-top:10px"></div>
    </section>

    <!-- Timer & Fade -->
    <section class="card" aria-label="Sleep Timer">
      <h2>Timer / Sleep</h2>
      <div class="grid-3">
        <div class="stack">
          <label for="timerMin">Duration (minutes)</label>
          <input id="timerMin" class="slider" type="range" min="5" max="180" value="30"/>
          <div><span class="kbd" id="timerMinLabel">30 min</span></div>
        </div>
        <div class="stack">
          <label class="btn-toggle"><input type="checkbox" class="switch" id="fadeOut" checked/> Fade Out</label>
          <div class="small">Gradually reduces volume in the last minutes.</div>
        </div>
        <div class="stack">
          <button class="btn" id="btnStartTimer">‚è≥ Start Timer</button>
          <button class="btn ghost" id="btnCancelTimer">Cancel</button>
          <div class="small">Remaining: <span class="kbd" id="timerRemain">‚Äì</span></div>
        </div>
      </div>
    </section>

    <!-- Presets -->
    <section class="card" aria-label="Presets">
      <h2>Presets</h2>
      <div class="grid-2">
        <div class="stack">
          <label for="presetName">Preset name</label>
          <input id="presetName" type="text" placeholder="e.g., Gentle Sleep" />
          <div class="row">
            <button class="btn" id="btnSavePreset">üíæ Save</button>
            <button class="btn" id="btnExportPreset">‚¨áÔ∏è Export</button>
            <input id="presetImport" type="file" accept="application/json" style="display:none"/>
            <button class="btn" id="btnImportPreset">‚¨ÜÔ∏è Import</button>
          </div>
        </div>
        <div class="stack">
          <label for="presetList">Load a preset</label>
          <select id="presetList"></select>
          <div class="row">
            <button class="btn" id="btnLoadPreset">üì• Load</button>
            <button class="btn warn" id="btnDeletePreset">üóëÔ∏è Delete</button>
          </div>
        </div>
      </div>
      <div class="small">Presets are stored locally in your browser.</div>
    </section>

    <!-- Info -->
    <section class="card" aria-label="Info & Safety">
      <h2>Tips</h2>
      <ul class="small">
        <li>Always start at low volume and increase <em>slowly</em>.</li>
        <li>If a frequency bothers you, adjust the equalizer (reduce treble if your tinnitus whistles).</li>
        <li>Use the timer and fade for falling asleep.</li>
        <li>Try different mixes (white/pink/brown + ‚Äúrain‚Äù/‚Äúwind‚Äù).</li>
      </ul>
    </section>
  </main>

  <footer>
    <div class="small">SilentWave ‚Ä¢ Local app (no data sent). ‚Äî Tip: add your favorite MP3s.</div>
  </footer>

<script src="script.js">
</script>

</body>
</html>
